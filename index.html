<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>For Ambrine üå∑ From Penny</title>
<meta name="description" content="Dropping tulips that bloom for Ambrine. Interactive and sweet." />
<style>
  :root{
    --sky1:#ffe8f3; --sky2:#f6d9ff; --sky3:#ffdfe9;
    --stem:#16823a; --leaf:#1aa153; --bud:#f06292; --petal:#ff7fb8; --center:#ffd166;
    --panel:#0d0711; --text:#f8eef7;
  }

  /* Base page */
  html,body{height:100%;margin:0}
  body{
    font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans", sans-serif;
    background:
      radial-gradient(1200px 600px at 10% -10%, #ffffff40, #0000 60%),
      linear-gradient(160deg, var(--sky1), var(--sky2) 55%, var(--sky3));
    overflow:hidden;
    color:var(--text);
  }

  /* Header panel */
  .panel{
    position:fixed; left:50%; top:12px; transform:translateX(-50%);
    background:#00000050; backdrop-filter: blur(8px) saturate(120%);
    border-radius:22px; padding:12px 18px; text-align:center; box-shadow:0 10px 40px #00000030;
  }
  .title{margin:0;font-size:clamp(18px,5vw,26px)}
  .subtitle{margin:4px 0 0;font-size:clamp(12px,3.6vw,14px);opacity:.85}

  /* Garden stage */
  .garden{position:relative; width:100vw; height:100vh;}
  .ground{
    position:absolute; left:0; right:0; bottom:0; height:80px;
    background: linear-gradient(#0000, #00000014);
  }

  /* TULIP (closed bud while falling) */
  .tulip{
    --x: 50vw; /* set by JS */
    position:absolute; left:var(--x); top:-120px; width:90px; height:140px;
    transform:translateX(-50%);
    pointer-events:none;
  }
  .drop{ animation: fall var(--t,7s) linear forwards; }
  @keyframes fall{ to{ transform:translate(-50%, calc(100vh - 120px)); } }

  .stem{position:absolute; left:calc(50% - 4px); bottom:20px; width:8px; height:90px; background:var(--stem); border-radius:6px}
  .leaf{position:absolute; bottom:58px; width:52px; height:24px; background:var(--leaf); border-radius:26px 26px 6px 26px}
  .leaf.left{left:calc(50% - 40px); transform:rotate(-22deg)}
  .leaf.right{right:calc(50% - 40px); transform:scaleX(-1) rotate(-18deg)}
  .bud{
    position:absolute; left:50%; bottom:92px; width:48px; height:54px; transform:translateX(-50%);
    background:var(--bud); border-radius:30px 30px 30px 30px / 36px 36px 14px 14px;
    box-shadow: 0 4px 14px #ff7fb83a;
  }

  /* BLOOM (shows after landing) */
  .bloom{ position:absolute; left:50%; bottom:94px; transform:translate(-50%,0) scale(.1); opacity:0; }
  .bloom .petal{
    position:absolute; width:64px; height:94px; background:var(--petal);
    border-radius:50px 50px 10px 10px; left:0; top:0;
    filter: drop-shadow(0 4px 12px #ff7fb84a);
    transform-origin:32px 80px;
  }
  .bloom .petal:nth-child(1){ transform:rotate(0deg) translate(0,-70px)}
  .bloom .petal:nth-child(2){ transform:rotate(45deg) translate(0,-70px)}
  .bloom .petal:nth-child(3){ transform:rotate(90deg) translate(0,-70px)}
  .bloom .petal:nth-child(4){ transform:rotate(135deg) translate(0,-70px)}
  .bloom .petal:nth-child(5){ transform:rotate(180deg) translate(0,-70px)}
  .bloom .petal:nth-child(6){ transform:rotate(225deg) translate(0,-70px)}
  .bloom .petal:nth-child(7){ transform:rotate(270deg) translate(0,-70px)}
  .bloom .petal:nth-child(8){ transform:rotate(315deg) translate(0,-70px)}
  .center{
    position:absolute; left:50%; top:50%; width:78px; height:78px; transform:translate(-50%,-50%);
    background:var(--center); border-radius:50%;
    box-shadow: inset 0 0 10px #00000018, 0 0 22px #ffd166aa;
  }
  .bloom-in{ animation: bloom 700ms ease-out forwards; }
  @keyframes bloom{
    0%{ transform:translate(-50%,0) scale(.1); opacity:0 }
    60%{ transform:translate(-50%,0) scale(1.12); opacity:1 }
    100%{ transform:translate(-50%,0) scale(1) }
  }

  /* Sparkles on bloom */
  .sparkle{
    position:fixed; font-size:18px; pointer-events:none;
    animation: pop 900ms ease-out forwards;
  }
  @keyframes pop{
    0%{transform:translate(0,0) scale(.8); opacity:1}
    100%{transform:var(--tr); opacity:0}
  }

  /* Click hint & buttons */
  .hint{position:fixed; bottom:14px; left:50%; transform:translateX(-50%); font-size:13px; opacity:.85}
  .btn{
    position:fixed; right:12px; bottom:12px;
    border:0; border-radius:999px; padding:10px 14px; font-weight:700;
    background:#ff7bb3; color:white; box-shadow:0 10px 24px #ff7bb34a; cursor:pointer;
  }
  .btn:active{transform:translateY(1px)}

  /* Popup */
  .overlay{
    position:fixed; inset:0; display:grid; place-items:center;
    background:#00000060; backdrop-filter:blur(6px); opacity:0; pointer-events:none;
    transition:opacity .35s ease;
  }
  .overlay.show{opacity:1; pointer-events:auto}
  .popup{
    width:min(520px,92vw); text-align:center; background:#ffffffee; color:#432d3e;
    border-radius:20px; padding:22px 18px; box-shadow:0 16px 60px #00000040;
  }
  .popup h2{margin:.2rem 0}
  .popup p{margin:.2rem 0 .6rem}
  .close{
    border:0; border-radius:999px; padding:10px 16px; background:#8a8cf0; color:white; font-weight:700;
    box-shadow:0 10px 24px #8a8cf04a; cursor:pointer;
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce){
    *{animation:none!important; transition:none!important}
  }
</style>
</head>
<body>
  <div class="panel">
    <h1 class="title">üå∑ For Ambrine üå∑</h1>
    <p class="subtitle">From Penny ‚Äî tap anywhere to grow a flower.</p>
  </div>

  <div class="garden" id="garden" aria-label="Tulip garden"></div>
  <div class="ground"></div>

  <div class="hint">Tip: tap/click to bloom a flower ‚ú®</div>
  <button class="btn" id="more">Drop more tulips</button>

  <!-- Popup -->
  <div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-labelledby="pop-title">
    <div class="popup">
      <h2 id="pop-title">For Ambrine üå∑ From Penny</h2>
      <p>Wishing you days that keep blooming beautifully.</p>
      <button class="close" id="closePop">Thank you üå∏</button>
    </div>
  </div>

<script>
  const garden = document.getElementById('garden');

  // --- Create a falling tulip
  function spawnTulip(x=null, duration=null){
    const t = document.createElement('div');
    t.className = 'tulip drop';
    const left = x ?? (Math.random()*88 + 6); // 6‚Äì94vw
    t.style.setProperty('--x', left + 'vw');
    t.style.setProperty('--t', (duration ?? (6 + Math.random()*5)) + 's');

    // structure
    t.innerHTML = `
      <div class="stem"></div>
      <div class="leaf left"></div>
      <div class="leaf right"></div>
      <div class="bud"></div>
      <div class="bloom" hidden>
        <div class="petal"></div><div class="petal"></div><div class="petal"></div><div class="petal"></div>
        <div class="petal"></div><div class="petal"></div><div class="petal"></div><div class="petal"></div>
        <div class="center"></div>
      </div>
    `;

    // when the fall finishes -> bloom
    t.addEventListener('animationend', () => bloom(t));
    garden.appendChild(t);
  }

  // --- Turn a tulip into a bloom at its current place
  function bloom(t){
    const bud = t.querySelector('.bud');
    const b = t.querySelector('.bloom');
    bud.remove();
    b.hidden = false;
    b.classList.add('bloom-in');

    // sparkles
    const rect = b.getBoundingClientRect();
    confetti(rect.left + rect.width/2, rect.top + rect.height/2);
  }

  // --- Sparkles
  function confetti(x,y){
    const bits = ["‚ú®","‚≠ê","üí´","üå∏","üå∑"];
    for(let i=0;i<18;i++){
      const s = document.createElement('div');
      s.className = 'sparkle';
      s.textContent = bits[Math.floor(Math.random()*bits.length)];
      s.style.left = x+'px';
      s.style.top = y+'px';
      const ang = Math.random()*Math.PI*2, dist = 40+Math.random()*90;
      const dx = Math.cos(ang)*dist, dy = Math.sin(ang)*dist;
      s.style.setProperty('--tr', `translate(${dx}px, ${dy}px)`);
      document.body.appendChild(s);
      setTimeout(()=>s.remove(), 900);
    }
  }

  // --- Click to bloom at point
  garden.addEventListener('pointerdown', (e)=>{
    const vw = window.innerWidth;
    const left = (e.clientX / vw) * 100;
    // spawn a very short fall at that x, then instantly bloom
    const t = spawnTulip(left, 0.6);
  });

  // --- Drop a stream of tulips
  function rainTulips(count=8, gap=600){
    for(let i=0;i<count;i++){
      setTimeout(()=>spawnTulip(), i*gap);
    }
  }

  // initial rain
  rainTulips(10, 650);

  // button to add more
  document.getElementById('more').addEventListener('click', ()=> rainTulips(6, 500));

  // --- Popup message
  const overlay = document.getElementById('overlay');
  const closePop = document.getElementById('closePop');
  setTimeout(()=> overlay.classList.add('show'), 2600);
  closePop.addEventListener('click', ()=> overlay.classList.remove('show'));
</script>
</body>
</html>
